---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

// 2. Get the specific post data
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title} mainClass="main-article">
  <article class="blog-post">
    <header>
      <h1>{entry.data.title}</h1>
      <p class="meta">Published on {entry.data.pubDate.toLocaleDateString('en-US', { timeZone: 'UTC' })}</p>
    </header>
    
    <div class="content">
      <Content />
    </div>

    <div class="back-link">
      <a href="/blog">‚Üê Back to Index</a>
    </div>
  </article>
</Layout>

<style>
  .blog-post { 
    max-width: 700px; 
    margin: 0 auto; 
    background-color: var(--card-bg);
    padding: 3rem; 
    border-radius: 8px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.05); 
    color: var(--text-color);
  }
  
  header { 
    margin-bottom: 2rem; 
    text-align: center; 
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 2rem; 
  }
  
  h1 { 
    font-size: 2.5rem; 
    margin-bottom: 0.5rem; 
    /* CHANGED: Uses accent color (Blue) instead of plain text color */
    color: var(--accent-color); 
  }
  
  .meta { color: var(--secondary-text); }
  
  .content { 
    line-height: 1.8; 
    font-size: 1.1rem; 
    color: var(--text-color);
  }
  
  .content :global(h2) { 
    margin-top: 2rem; 
    color: var(--accent-color); /* Optional: Headers inside the post are also blue now */
  }
  
  .content :global(p) { margin-bottom: 1.5rem; }
  
  .content :global(code) { 
    background-color: var(--bg-color);
    padding: 0.2rem 0.4rem; 
    border-radius: 4px; 
    font-family: monospace; 
    color: var(--accent-color);
  }
  
  .content :global(pre) {
    background-color: #1e1e1e !important;
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
  }

  .back-link { margin-top: 3rem; text-align: center; }
  
  .back-link a { 
    color: var(--accent-color); 
    text-decoration: none; 
    font-weight: bold; 
  }
</style>